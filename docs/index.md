# Cytoscape.js ä»‹ç»

## å…³äº Cytoscape.js

Cytoscape.js æ˜¯ä¸€ä¸ªç”¨ JavaScript ç¼–å†™çš„å¼€æºå›¾è®ºï¼ˆç½‘ç»œï¼‰åº“ï¼Œä¸“é—¨ç”¨äºå›¾å½¢åˆ†æå’Œå¯è§†åŒ–ã€‚
**å®˜æ–¹æ–‡æ¡£**: [https://js.cytoscape.org/](https://js.cytoscape.org/) 
æ²¡æœ‰æä¾›ä¸­æ–‡ï¼Œè¿™é‡Œæ˜¯å‚è€ƒåŸæ–‡æ¡£ç¼–å†™çš„ä¸­æ–‡æ–‡æ¡£ï¼Œä¸ºæ–¹ä¾¿ä½¿ç”¨ï¼Œè¿˜æä¾›äº†ä¸€äº›ä»£ç ç¤ºä¾‹
Cytoscape.js å…è®¸æ‚¨è½»æ¾æ˜¾ç¤ºå’Œæ“ä½œä¸°å¯Œçš„äº¤äº’å¼å›¾å½¢ã€‚ç”±äº Cytoscape.js å…è®¸ç”¨æˆ·ä¸å›¾å½¢äº¤äº’ï¼Œå¹¶ä¸”åº“å…è®¸å®¢æˆ·ç«¯æŒ‚æ¥åˆ°ç”¨æˆ·äº‹ä»¶ï¼Œå› æ­¤ Cytoscape.js å¾ˆå®¹æ˜“é›†æˆåˆ°æ‚¨çš„åº”ç”¨ç¨‹åºä¸­ï¼Œç‰¹åˆ«æ˜¯å› ä¸º Cytoscape.js åŒæ—¶æ”¯æŒæ¡Œé¢æµè§ˆå™¨ï¼ˆå¦‚ Chromeï¼‰å’Œç§»åŠ¨æµè§ˆå™¨ï¼ˆå¦‚ iPadï¼‰ã€‚Cytoscape.js åŒ…å«æ‚¨æœŸæœ›çš„æ‰€æœ‰å¼€ç®±å³ç”¨çš„æ‰‹åŠ¿ï¼ŒåŒ…æ‹¬åŒæŒ‡ç¼©æ”¾ã€æ¡†é€‰ã€å¹³ç§»ç­‰ã€‚

Cytoscape.js è¿˜è€ƒè™‘äº†å›¾å½¢åˆ†æï¼šè¯¥åº“åŒ…å«å›¾è®ºä¸­çš„è®¸å¤šæœ‰ç”¨å‡½æ•°ã€‚æ‚¨å¯ä»¥åœ¨ Node.js ä¸Šæ— å¤´ä½¿ç”¨ Cytoscape.js åœ¨ç»ˆç«¯æˆ– Web æœåŠ¡å™¨ä¸Šè¿›è¡Œå›¾å½¢åˆ†æã€‚

## ä¸»è¦ç‰¹æ€§

- **çº¯ JavaScript ç¼–å†™**ï¼šå®Œå…¨åŠŸèƒ½çš„å›¾å½¢åº“
- **å¼€æºè®¸å¯è¯**ï¼šæ ¸å¿ƒ Cytoscape.js åº“å’Œæ‰€æœ‰ç¬¬ä¸€æ–¹æ‰©å±•å‡é‡‡ç”¨å®½æ¾çš„å¼€æºè®¸å¯è¯ï¼ˆMITï¼‰
- **ç”Ÿäº§çº§åº”ç”¨**ï¼šåœ¨å•†ä¸šé¡¹ç›®å’Œå¼€æºé¡¹ç›®ä¸­å¹¿æ³›ä½¿ç”¨
- **ç”¨æˆ·å‹å¥½è®¾è®¡**ï¼šæ—¢é€‚ç”¨äºé¢å‘ç”¨æˆ·çš„åº”ç”¨ç¨‹åºç”¨ä¾‹ï¼Œä¹Ÿé€‚ç”¨äºå¼€å‘äººå‘˜ç”¨ä¾‹
- **é«˜åº¦ä¼˜åŒ–**ï¼šæ€§èƒ½å“è¶Š
- **å¹¿æ³›å…¼å®¹æ€§**ï¼š
  - æ‰€æœ‰ç°ä»£æµè§ˆå™¨
  - æ”¯æŒ ES5 å’Œ canvas çš„æ—§ç‰ˆæµè§ˆå™¨
  - å¤šç§æ¨¡å—ç³»ç»Ÿï¼ˆES modulesã€UMDã€CommonJS/Node.jsã€AMD/Require.jsï¼‰
  - å¤šç§åŒ…ç®¡ç†å™¨ï¼ˆnpmã€yarnã€bowerï¼‰

## æ ¸å¿ƒåŠŸèƒ½

### ğŸ¨ å¯è§†åŒ–ç‰¹æ€§
- **æ ·å¼è¡¨ç³»ç»Ÿ**ï¼šä»¥æ¸²æŸ“æ— å…³çš„æ–¹å¼å°†è¡¨ç¤ºä¸æ•°æ®åˆ†ç¦»
- **è‡ªåŠ¨å¸ƒå±€**ï¼šä½¿ç”¨å¸ƒå±€è‡ªåŠ¨æˆ–æ‰‹åŠ¨å®šä½èŠ‚ç‚¹
- **åŠ¨ç”»æ”¯æŒ**ï¼šå¯åŠ¨ç”»åŒ–çš„å›¾å½¢å…ƒç´ å’Œè§†å£
- **é€‰æ‹©å™¨ç³»ç»Ÿ**ï¼šç”¨äºç®€æ´è¿‡æ»¤å’Œå›¾å½¢æŸ¥è¯¢çš„é€‰æ‹©å™¨

### ğŸ¯ äº¤äº’ç‰¹æ€§
- **ç»Ÿä¸€äº‹ä»¶æ¨¡å‹**ï¼šåœ¨ç†Ÿæ‚‰çš„äº‹ä»¶æ¨¡å‹åŸºç¡€ä¸ŠæŠ½è±¡å’Œç»Ÿä¸€è§¦æ‘¸äº‹ä»¶
- **æ ‡å‡†æ‰‹åŠ¿æ”¯æŒ**ï¼šå†…ç½®æ”¯æŒæ¡Œé¢å’Œè§¦æ‘¸çš„æ ‡å‡†æ‰‹åŠ¿
- **é“¾å¼è°ƒç”¨**ï¼šä¸ºæ–¹ä¾¿ä½¿ç”¨æä¾›é“¾å¼è°ƒç”¨
- **å‡½æ•°å¼ç¼–ç¨‹æ¨¡å¼**ï¼šæ”¯æŒå‡½æ•°å¼ç¼–ç¨‹æ¨¡å¼

### ğŸ”¬ åˆ†æåŠŸèƒ½
- **å›¾è®ºç®—æ³•**ï¼šä» BFS åˆ° PageRank çš„å„ç§ç®—æ³•
- **é›†åˆç†è®ºæ“ä½œ**ï¼šæ”¯æŒé›†åˆç†è®ºæ“ä½œ
- **JSON åºåˆ—åŒ–**ï¼šå®Œå…¨å¯åºåˆ—åŒ–å’Œååºåˆ—åŒ–

## å®‰è£…

### ä½¿ç”¨ npm
```bash
npm install cytoscape
```

### ä½¿ç”¨ yarn
```bash
yarn add cytoscape
```

### ä½¿ç”¨ bower
```bash
bower install cytoscape
```

## åŸºç¡€ä½¿ç”¨ç¤ºä¾‹

### 1. åŸºæœ¬å›¾å½¢åˆ›å»º

```javascript
import cytoscape from 'cytoscape';

// åˆ›å»º Cytoscape å®ä¾‹
const cy = cytoscape({
  container: document.getElementById('cy'), // å®¹å™¨å…ƒç´ 

  elements: [
    // èŠ‚ç‚¹
    { data: { id: 'a', label: 'èŠ‚ç‚¹ A' } },
    { data: { id: 'b', label: 'èŠ‚ç‚¹ B' } },
    { data: { id: 'c', label: 'èŠ‚ç‚¹ C' } },
    
    // è¾¹
    { data: { id: 'ab', source: 'a', target: 'b' } },
    { data: { id: 'bc', source: 'b', target: 'c' } }
  ],

  style: [
    {
      selector: 'node',
      style: {
        'background-color': '#666',
        'label': 'data(label)',
        'text-valign': 'center',
        'text-halign': 'center'
      }
    },
    {
      selector: 'edge',
      style: {
        'width': 3,
        'line-color': '#ccc',
        'target-arrow-color': '#ccc',
        'target-arrow-shape': 'triangle'
      }
    }
  ],

  layout: {
    name: 'grid',
    rows: 1
  }
});
```

### 2. åŠ¨æ€æ·»åŠ èŠ‚ç‚¹

```javascript
// æ·»åŠ æ–°èŠ‚ç‚¹
cy.add({
  group: 'nodes',
  data: { 
    id: 'd', 
    label: 'æ–°èŠ‚ç‚¹' 
  },
  position: { x: 200, y: 200 }
});

// æ·»åŠ æ–°è¾¹
cy.add({
  group: 'edges',
  data: {
    id: 'cd',
    source: 'c',
    target: 'd'
  }
});
```

### 3. äº‹ä»¶å¤„ç†

```javascript
// èŠ‚ç‚¹ç‚¹å‡»äº‹ä»¶
cy.on('tap', 'node', function(evt) {
  const node = evt.target;
  console.log('ç‚¹å‡»äº†èŠ‚ç‚¹:', node.id());
});

// è¾¹ç‚¹å‡»äº‹ä»¶
cy.on('tap', 'edge', function(evt) {
  const edge = evt.target;
  console.log('ç‚¹å‡»äº†è¾¹:', edge.id());
});
```

### 4. æ ·å¼å®šåˆ¶

```javascript
const deviceStyle = [
  {
    selector: 'node[type="server"]',
    style: {
      'background-color': '#FF6B6B',
      'shape': 'rectangle',
      'width': '60px',
      'height': '40px'
    }
  },
  {
    selector: 'node[type="router"]',
    style: {
      'background-color': '#4ECDC4',
      'shape': 'diamond',
      'width': '50px',
      'height': '50px'
    }
  },
  {
    selector: 'node[status="online"]',
    style: {
      'border-width': '3px',
      'border-color': '#4CAF50'
    }
  }
];
```

### 5. å¸ƒå±€é…ç½®

```javascript
// ç½‘æ ¼å¸ƒå±€
cy.layout({
  name: 'grid',
  rows: 3,
  cols: 3
}).run();

// å±‚æ¬¡å¸ƒå±€
cy.layout({
  name: 'breadthfirst',
  directed: true,
  roots: '#root'
}).run();

// ç‰©ç†å¸ƒå±€ï¼ˆCoSEï¼‰
cy.layout({
  name: 'cose',
  idealEdgeLength: 100,
  nodeOverlap: 20,
  refresh: 20,
  fit: true,
  padding: 30,
  randomize: false,
  componentSpacing: 100,
  nodeRepulsion: 400000,
  edgeElasticity: 100,
  nestingFactor: 5,
  gravity: 80,
  numIter: 1000,
  initialTemp: 200,
  coolingFactor: 0.95,
  minTemp: 1.0
}).run();
```

## å¸¸è§åº”ç”¨åœºæ™¯

### ğŸŒ ç½‘ç»œæ‹“æ‰‘å›¾
- æ•°æ®ä¸­å¿ƒç½‘ç»œæ‹“æ‰‘
- ä¼ä¸šç½‘ç»œæ¶æ„å›¾
- æœåŠ¡å™¨é›†ç¾¤æ‹“æ‰‘

### ğŸ”— å…³ç³»å›¾è°±
- ç¤¾äº¤ç½‘ç»œå…³ç³»
- çŸ¥è¯†å›¾è°±
- ç»„ç»‡æ¶æ„å›¾

### ğŸ“Š æ•°æ®å¯è§†åŒ–
- æµç¨‹å›¾
- ä¾èµ–å…³ç³»å›¾
- æ•°æ®æµå›¾

### ğŸ§¬ ç§‘å­¦ç ”ç©¶
- ç”Ÿç‰©ç½‘ç»œ
- åŒ–å­¦åˆ†å­ç»“æ„
- åŸºå› å…³ç³»ç½‘ç»œ

## æ‰©å±•ç”Ÿæ€

Cytoscape.js æ‹¥æœ‰ä¸°å¯Œçš„æ‰©å±•ç”Ÿæ€ç³»ç»Ÿï¼š

- **å¸ƒå±€æ‰©å±•**ï¼šCola.jsã€Dagreã€Klay ç­‰
- **äº¤äº’æ‰©å±•**ï¼šEdgehandlesã€Cxtmenuã€Popper.js ç­‰
- **åˆ†ææ‰©å±•**ï¼šå„ç§å›¾è®ºç®—æ³•æ‰©å±•

## æ€§èƒ½ç‰¹ç‚¹

- **é«˜æ€§èƒ½æ¸²æŸ“**ï¼šæ”¯æŒå¤§è§„æ¨¡å›¾å½¢ï¼ˆæ•°åƒä¸ªèŠ‚ç‚¹å’Œè¾¹ï¼‰
- **å†…å­˜ä¼˜åŒ–**ï¼šé«˜æ•ˆçš„å†…å­˜ä½¿ç”¨
- **å“åº”å¼**ï¼šæµç•…çš„ç”¨æˆ·äº¤äº’ä½“éªŒ
- **å¯æ‰©å±•æ€§**ï¼šæ¨¡å—åŒ–è®¾è®¡ï¼ŒæŒ‰éœ€åŠ è½½åŠŸèƒ½

## ç¤¾åŒºæ”¯æŒ

- **æ´»è·ƒç»´æŠ¤**ï¼šæ¯å‘¨è¡¥ä¸å‘å¸ƒã€æ¯æœˆåŠŸèƒ½å‘å¸ƒ
- **å®Œæ•´æ–‡æ¡£**ï¼šåŒ…å«å®æ—¶ä»£ç ç¤ºä¾‹çš„äº¤äº’å¼æ–‡æ¡£
- **æµ‹è¯•è¦†ç›–**ï¼šå¤§é‡æµ‹è¯•å¥—ä»¶ç¡®ä¿è´¨é‡
- **å¼€æºç¤¾åŒº**ï¼šGitHub ä¸Šçš„æ´»è·ƒç¤¾åŒºæ”¯æŒ

---

**äº†è§£æ›´å¤š**ï¼šè®¿é—® [Cytoscape.js å®˜ç½‘](https://js.cytoscape.org/) è·å–å®Œæ•´æ–‡æ¡£å’Œç¤ºä¾‹ã€‚ 